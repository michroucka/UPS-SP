<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane style="-fx-background-color: #2d5016;" xmlns="http://javafx.com/javafx/17.0.12" xmlns:fx="http://javafx.com/fxml/1" fx:controller="cz.zcu.kiv.ups.sp.GameController">

    <!-- Top: Connection Panel -->
    <top>
        <VBox fx:id="connectionPanel" maxHeight="50" minHeight="50" spacing="8" style="-fx-background-color: #3d6026; -fx-padding: 10;">
            <HBox alignment="CENTER_LEFT" spacing="8">
                <Label style="-fx-text-fill: white; -fx-font-size: 13px;" text="Server:" />
                <TextField fx:id="serverHostField" maxWidth="150" prefWidth="100" text="localhost" />
                <Label style="-fx-text-fill: white; -fx-font-size: 13px;" text="Port:" />
                <TextField fx:id="serverPortField" maxWidth="70" prefWidth="55" text="10000" />
                <Label style="-fx-text-fill: white; -fx-font-size: 13px;" text="Nickname:" />
                <TextField fx:id="nicknameField" maxWidth="150" prefWidth="100" />
                <Button fx:id="connectButton" onAction="#handleConnect" style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold;" text="Connect" />
                <Button fx:id="disconnectButton" disable="true" onAction="#handleDisconnect" style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold;" text="Disconnect" />
                <Label fx:id="connectionStatus" style="-fx-text-fill: #ff9800; -fx-font-size: 13px; -fx-font-weight: bold;" text="Disconnected" />
            </HBox>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <ScrollPane fitToWidth="true" fitToHeight="true" style="-fx-background-color: transparent; -fx-background: transparent;">
            <StackPane>
                <!-- Lobby Panel -->
                <VBox fx:id="lobbyPanel" spacing="10" style="-fx-padding: 15;" visible="false">
                <Label style="-fx-text-fill: white; -fx-font-size: 20px; -fx-font-weight: bold;" text="Lobby" />

                <HBox spacing="10">
                    <Button onAction="#handleRefreshRooms" style="-fx-background-color: #2196F3; -fx-text-fill: white;" text="Refresh Rooms" />
                    <TextField fx:id="roomNameField" maxWidth="300" prefWidth="150" promptText="Room name">
                        <HBox.hgrow>ALWAYS</HBox.hgrow>
                    </TextField>
                    <Button onAction="#handleCreateRoom" style="-fx-background-color: #4CAF50; -fx-text-fill: white;" text="Create Room" />
                </HBox>

                <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="Available Rooms:" />
                <ListView fx:id="roomListView" style="-fx-background-color: #4d7036;">
                    <VBox.vgrow>ALWAYS</VBox.vgrow>
                </ListView>
            </VBox>

            <!-- Game Panel -->
            <VBox fx:id="gamePanel" spacing="10" style="-fx-padding: 10;" visible="false">
                <!-- Game Info Container -->
                <VBox fx:id="gameInfoContainer" spacing="0">
                    <!-- Game Info -->
                    <HBox fx:id="gameInfoBox" alignment="CENTER" spacing="15" style="-fx-padding: 5;">
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="Round" />
                            <Label fx:id="roundLabel" style="-fx-text-fill: #FFD700; -fx-font-size: 18px; -fx-font-weight: bold;" text="0" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="Your Score" />
                            <Label fx:id="yourScoreLabel" style="-fx-text-fill: #4CAF50; -fx-font-size: 18px; -fx-font-weight: bold;" text="0" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="Opponent Score" />
                            <Label fx:id="opponentScoreLabel" style="-fx-text-fill: #f44336; -fx-font-size: 18px; -fx-font-weight: bold;" text="0" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="Role" />
                            <Label fx:id="roleLabel" style="-fx-text-fill: #FFD700; -fx-font-size: 18px; -fx-font-weight: bold;" text="-" />
                        </VBox>
                        <VBox alignment="CENTER" spacing="2">
                            <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="Opponent" />
                            <Label fx:id="opponentNameLabel" style="-fx-text-fill: white; -fx-font-size: 16px;" text="-" />
                        </VBox>
                    </HBox>

                    <!-- Separator -->
                    <Region maxHeight="1" minHeight="1" style="-fx-background-color: #4d7036; -fx-margin: 5 0 5 0;" />
                </VBox>

                <!-- Cards Container -->
                <VBox fx:id="cardsContainer" spacing="10">
                    <!-- Opponent Cards -->
                    <VBox alignment="CENTER" spacing="8">
                        <HBox fx:id="opponentCardsBox" alignment="CENTER" spacing="8" />
                        <HBox alignment="CENTER" spacing="10">
                            <Label style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" text="Opponent Cards" />
                            <Label fx:id="opponentHandValueLabel" style="-fx-text-fill: #f44336; -fx-font-size: 16px; -fx-font-weight: bold;" text="(Value: 0)" />
                        </HBox>
                    </VBox>

                    <!-- Separator -->
                    <Region maxHeight="1" minHeight="1" style="-fx-background-color: #4d7036; -fx-margin: 5 0 5 0;" />

                    <!-- Your Cards -->
                    <VBox alignment="CENTER" spacing="8">
                        <HBox alignment="CENTER" spacing="10">
                            <Label style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;" text="Your Cards" />
                            <Label fx:id="handValueLabel" style="-fx-text-fill: #FFD700; -fx-font-size: 16px; -fx-font-weight: bold;" text="(Value: 0)" />
                        </HBox>
                        <HBox fx:id="yourCardsBox" alignment="CENTER" spacing="8" />
                    </VBox>
                </VBox>

                <!-- Game Actions Container -->
                <VBox fx:id="gameActionsContainer" alignment="CENTER" spacing="10">
                    <!-- Hit/Stand Buttons -->
                    <HBox alignment="CENTER" spacing="10">
                        <Button fx:id="hitButton" disable="true" minHeight="30" minWidth="80" onAction="#handleHit" prefHeight="35" prefWidth="110" style="-fx-background-color: #2196F3; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold;" text="Hit" />
                        <Button fx:id="standButton" disable="true" minHeight="30" minWidth="80" onAction="#handleStand" prefHeight="35" prefWidth="110" style="-fx-background-color: #FF9800; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold;" text="Stand" />
                    </HBox>
                </VBox>

                <!-- Waiting Area (for opponent's turn) -->
                <VBox fx:id="waitingArea" alignment="CENTER" minHeight="60" spacing="8" style="-fx-padding: 10;" visible="false">
                    <Label style="-fx-text-fill: #FFD700; -fx-font-size: 18px; -fx-font-weight: bold;" text="Waiting for opponent..." />
                </VBox>

                <!-- Waiting for Opponent Area (waiting for player to join) -->
                <VBox fx:id="waitingForOpponentArea" alignment="CENTER" minHeight="80" spacing="8" style="-fx-padding: 10;" visible="false">
                    <Label style="-fx-text-fill: #FFD700; -fx-font-size: 20px; -fx-font-weight: bold;" text="Waiting for opponent to join..." />
                    <Label style="-fx-text-fill: white; -fx-font-size: 14px;" text="The game will start automatically when another player joins." />
                </VBox>

                <!-- Round Result Area -->
                <VBox fx:id="roundResultArea" alignment="CENTER" minHeight="80" spacing="8" style="-fx-padding: 10;" visible="false">
                    <Label fx:id="roundResultTitle" style="-fx-text-fill: #FFD700; -fx-font-size: 20px; -fx-font-weight: bold;" text="" />
                    <Label fx:id="roundResultMessage" style="-fx-text-fill: white; -fx-font-size: 14px;" text="" textAlignment="CENTER" wrapText="true" />
                </VBox>

                <!-- Leave Game Button (always visible during game) -->
                <HBox alignment="CENTER" spacing="10">
                    <Button minHeight="30" minWidth="80" onAction="#handleLeaveGame" prefHeight="35" prefWidth="110" style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-size: 13px; -fx-font-weight: bold;" text="Leave Game" />
                </HBox>
            </VBox>
            </StackPane>
        </ScrollPane>
    </center>

    <!-- Bottom: Status Bar -->
    <bottom>
        <VBox maxHeight="25" minHeight="25" prefHeight="25" style="-fx-background-color: #3d6026; -fx-padding: 8;">
            <Label fx:id="statusLabel" style="-fx-text-fill: white; -fx-font-size: 13px;" text="Ready" />
        </VBox>
    </bottom>
</BorderPane>
